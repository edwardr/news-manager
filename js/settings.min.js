!function(){"use strict";function e(e){return!!new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?").test(e)}var t,n,c,o,r,u,s,l,a,m;t=chrome.storage.local,n=document.querySelector(".add-button"),s=document.querySelector(".submit"),u=document.querySelector(".custom-sources"),a=function(){t.get("news_sources",function(e){0!==Object.keys(e).length&&e.news_sources.forEach(function(e){document.querySelector('input[value="'+e+'"]').checked=!0})}),t.get("custom_sources",function(e){var t;0!==Object.keys(e).length&&e.custom_sources.forEach(function(e){(t=document.createElement("div")).className="custom-source",t.innerHTML='<span class="source-name">'+e.name+'</span><span class="source-url">'+e.url+'</span><img class="remove-button" src="assets/close.svg" />',document.querySelector(".no-custom-sources").remove(),u.appendChild(t)})}),setTimeout(function(){if(document.querySelector(".remove-button"))for(var e=document.querySelectorAll(".remove-button"),t=0;t<e.length;t++)e[t].addEventListener("click",m)},1e3)},document.addEventListener("DOMContentLoaded",a),m=function(){var e;this.parentNode.remove(),e=document.querySelectorAll(".custom-source");for(var n=[],c=0;c<e.length;c++){var o={};o.name=e[c].querySelector(".source-name").innerHTML,o.url=e[c].querySelector(".source-url").innerHTML,n.push(o)}t.set({custom_sources:n},function(){})},c=function(){var n,c,s,l;if(o=document.getElementById("new-source-name").value,r=document.getElementById("new-source-url").value,o.length<1)return!1;if(!e(r))return!1;(n=document.createElement("div")).className="custom-source",n.innerHTML='<span class="source-name">'+o+'</span><span class="source-url">'+r+'</span><img class="remove-button" src="assets/close.svg" />',u.appendChild(n),(l=document.querySelector(".no-custom-sources"))&&l.remove(),c=document.querySelectorAll(".custom-source"),s=[];for(var a=0;a<c.length;a++){var d={};d.name=c[a].querySelector(".source-name").innerHTML,d.url=c[a].querySelector(".source-url").innerHTML,s.push(d)}t.set({custom_sources:s},function(){document.getElementById("new-source-name").value="",document.getElementById("new-source-url").value="";for(var e=document.querySelectorAll(".remove-button"),t=0;t<e.length;t++)e[t].addEventListener("click",m)})},l=function(){var e,n;e=document.querySelectorAll(".checkbox"),n=[];for(var c=0;c<e.length;c++)e[c].checked&&n.push(e[c].value);t.set({news_sources:n},function(){s.innerText="Saved!",setTimeout(function(){s.innerText="Save"},2e3)})},n.addEventListener("click",c),s.addEventListener("click",l)}();